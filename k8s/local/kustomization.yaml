apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Local Kubernetes deployment for S3 Manager with LocalStack
# Deploy everything with: kubectl apply -k k8s/local/

resources:
  # NOTE: Envoy Gateway must be installed separately first!
  # See deployment instructions in README.md
  
  # 1. Deploy Keycloak (authentication)
  - keycloak

  # 2. Deploy LocalStack (S3-compatible storage)
  - localstack

  # 3. Deploy S3 Manager application
  - test-deployment
  
  # 4. Deploy Envoy Gateway resources (Gateway, HTTPRoutes, Policies)
  - envoy-gateway/gateway.yaml
  - envoy-gateway/httproutes.yaml
